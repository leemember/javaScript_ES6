<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìž¥ë°”êµ¬ë‹ˆ ì¶œë ¥í•´ë³´ê¸°</title>
  <script src="lib/fx.js"></script>
</head>
<body>
  <div id="cart">
  </div>

  <script>

    // ìž¥ë°”êµ¬ë‹ˆì— ë‹´ì„ ìƒí’ˆë“¤
    // name(ìƒí’ˆëª…), price(ìƒí’ˆê°€ê²©), quantity(ìƒí’ˆìˆ˜ëŸ‰)
    const products = [
    {name: 'ë°˜íŒ”í‹°', price: 15000, quantity: 1, is_selected: true},
    {name: 'ê¸´íŒ”í‹°', price: 20000, quantity: 2, is_selected: false},
    {name: 'í•¸ë“œí°ì¼€ì´ìŠ¤', price: 15000, quantity: 3, is_selected: true},
    {name: 'í›„ë“œí‹°', price: 30000, quantity: 4, is_selected: false},
    {name: 'ë°”ì§€', price: 25000, quantity: 5, is_selected: false}
  ];

  // ì´ ìˆ˜ëŸ‰
  //const total_quantity = products => go(products,
 //   map( p => p.quantity), // ì´ê²ƒë§Œ ì°ì–´ë³´ë©´ ê²°ê³¼ê°’ : 1,2,3,4,5
 //   reduce((a,b) => a+b)); // ì´ ìˆ˜ëŸ‰ì´ë‚˜ì˜¨ë‹¤. reduceë¡œ ì´ ìˆ˜ëŸ‰ì„ ì¶•ì•½ì‹œì¼œ ê²°ê³¼ê°’ì„ ë½‘ì•„ëƒ„
  //log(total_quantity(products)); // ì–˜ë„ ì´ ìˆ˜ëŸ‰

  //-----------------------------------------------------------------------
  // â˜ðŸ» ìœ„ ì½”ë“œë¥¼ ë³€í˜•ì‹œì¼œì„œ
  // products => go(products, : ì´ë¶€ë¶„ì„ pipeë¡œ ê°„ë‹¨í•˜ê²Œ ë½‘ì•„ë‚¼ ìˆ˜ë„ ìžˆë‹¤.

  const add = (a,b) => a+b;
  
  const total_quantity = pipe(
    map( p => p.quantity), // ì´ê²ƒë§Œ ì°ì–´ë³´ë©´ ê²°ê³¼ê°’ : 1,2,3,4,5
    reduce((a,b) => a+b)); // ì´ ìˆ˜ëŸ‰ì´ë‚˜ì˜¨ë‹¤. reduceë¡œ ì´ ìˆ˜ëŸ‰ì„ ì¶•ì•½ì‹œì¼œ ê²°ê³¼ê°’ì„ ë½‘ì•„ëƒ„

  log(total_quantity(products)); // ì–˜ë„ ì´ ìˆ˜ëŸ‰

  const total_price = pipe(
    map(p => p.price * p.quantity),
    reduce((a,b) => a+b));

    log(total_price(products));
  </script>
</body>
</html>