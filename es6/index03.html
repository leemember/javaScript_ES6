<script>const log = console.log;</script>

## ğŸ’Œ map, filter, reduce ì•Œì•„ë³´ê¸°

<script>
  const products = [
    {name: 'ë°˜íŒ”í‹°', price: 15000},
    {name: 'ê¸´íŒ”í‹°', price: 20000},
    {name: 'í•¸ë“œí°ì¼€ì´ìŠ¤', price: 15000},
    {name: 'í›„ë“œí‹°', price: 30000},
    {name: 'ë°”ì§€', price: 25000}
  ];

 // ì´ë¦„ê³¼ ê°€ê²©ë“¤ì´ ë“¤ì–´ìˆëŠ” ë°ì´í„°ë“¤ì„ productsì— ë‹´ì•„ë†¨ë‹¤.
</script>


# map

<script>

  // ğŸ§¸ mapí•¨ìˆ˜
  const map = (f, iter) => { // í•¨ìˆ˜ë¥¼ ë°›ì•„ì„œ ì–´ë–¤ ê°’ì„ ì¶œë ¥í•  ê²ƒì¸ì§€.
    let res = [];
    for (const a of iter) {
      res.push(f(a)); // ì–´ë–¤ ê°’ì„ ìˆ˜ì§‘í•˜ë‹¤.
    }
    return res;
  };

  // ì´ë¦„(ìƒí’ˆëª…)ì„ ìˆ˜ì§‘í•˜ëŠ” ì½”ë“œë“¤
  // let names = [];
  // for (const p of products) {
  //   names.push(p.name);
  // }
  // log(names);

  log(map(p => p.name, products)); // ë°˜ë³µë¬¸ìœ¼ë¡œ ì¶œë ¥í•˜ê²Œ ëœë‹¤. (ìƒí’ˆ)

  // ê°€ê²©ì„ ìˆ˜ì§‘í•˜ëŠ” ì½”ë“œë“¤
  // let prices = [];
  // for (const p of products) {
  //   prices.push(p.price);
  // }
  // log(prices);

  log(map(p => p.price, products)); // ë°˜ë³µë¬¸ìœ¼ë¡œ ì¶œë ¥í•˜ê²Œ ëœë‹¤. (ê°€ê²©)

</script>

# ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ë”°ë¥¸ mapì˜ ë‹¤í˜•ì„±

<script>
  log([1, 2, 3].map(a => a + 1));
  log(map(el => el.nodeName, document.querySelectorAll('*')));
  //ê²°ê³¼ê°’ : html, head, script, body, script, script

  // const it = document.querySelectorAll('*')[Symbol.iterator]();
  // ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì„ ë”°ë¥´ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.
  // log(it.next());
  // log(it.next());
  // log(it.next());
  // log(it.next());
  // log(it.next());


  //genì´ë¼ëŠ” í•¨ìˆ˜ ì„ ì–¸
  function* gen() {
    yield 2;
    if (false) yield 3; // falseê°’ì„ ë„£ìœ¼ë©´ 3ì€ ì œì™¸ëœë‹¤.
    yield 4;
  }

  log(map(a => a * a, gen())); 
  //ê³±í•˜ê¸°ë¡œ ì¶œë ¥ë„ ê°€ëŠ¥í•˜ë‹¤.
  //ê²°ê³¼ê°’ 4,16


  //mapì„ ì„ ì–¸í•œë‹¤.
  let m = new Map();
  m.set('a', 10); // aì— 10ì„ ë‹´ê³ 
  m.set('b', 20); // bì— 20ì„ ë‹´ì•˜ë‹¤.
  log(new Map(map(([k, a]) => [k, a * 2], m)));
  //êµ¬ì¡°ë¶„í•´ë¥¼ í•´ì„œ kì™€ ê°’ì„ ë§¨ ë’¤ì— ìˆëŠ” mì— ë§ì¶°ì„œ ë¦¬í„´í•˜ê²Œ í•´ì¤€ë‹¤.
  //ê²°ê³¼ê°’ : 0: ["a", 20] , 1:["b",40]

  console.clear();
</script>


# filter

<script>
  const filter = (f, iter) => {
    let res = [];
    for (const a of iter) {
      if (f(a)) res.push(a);
    }
    return res;
  };

  // ğŸ˜º ì´ë ‡ê²Œ ê¸´ ì½”ë“œë“¤ì„ ìœ„ì— ì½”ë“œì²˜ëŸ¼ ë¦¬íŒ©í† ë§ í•´ì£¼ë©´ ëœë‹¤. es6 ë¬¸ë²•ì˜ ì¥ì ì´ë‹¤.
  // let under20000 = [];
  // for (const p of products) {
  //   if (p.price < 20000) under20000.push(p);
  // }
  // log(...under20000);

  log(...filter(p => p.price < 20000, products));

  // let over20000 = [];
  // for (const p of products) {
  //   if (p.price >= 20000) over20000.push(p);
  // }
  // log(...over20000);

  log(...filter(p => p.price >= 20000, products));

  log(filter(n => n % 2, [1, 2, 3, 4]));

  log(filter(n => n % 2, function* () {
    yield 1;
    yield 2;
    yield 3;
    yield 4;
    yield 5;
  }()));
  //ì´ë ‡ê²Œ í•˜ë©´ í™€ìˆ˜ë§Œ ì¶œë ¥ëœë‹¤.

  console.clear();
</script>

# reduce

<script>
  const nums = [1, 2, 3, 4, 5];
  //ì´ numsì— ë“¤ì–´ìˆëŠ” ëª¨ë“  ê°’ì„ ë‹¤ ë”í•´ì„œ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ë½‘ì•„ë‚´ì¤€ë‹¤.

  let total = 0;
  for (const n of nums) {
    total = total + n;
  }
  log(total); //ê²°ê³¼ê°’ 15


//----------------------------------------------------
// ì§ì ‘ ë³€ê²½í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ return ìœ¼ë¡œ ê°’ì„ ë½‘ì•„ë‚¸ë‹¤.
  const reduce = (f, acc, iter) => {
    if (!iter) {// iterê°€ ì—†ì„ ê²½ìš°
      iter = acc[Symbol.iterator](); // ì‹¬ë³¼ ì´í„°ë ˆì´í„°ë¥¼ ì‹¤í–‰í•œë‹¤.
      acc = iter.next().value; // ì´í„°ëŸ¬ë¸” ê°’ì„ ì´í…Œë ˆì´í„°ë¡œ ë³€í™˜í•œë‹¤.
    }
    for (const a of iter) {
      acc = f(acc, a);
    }
    return acc;
  };

  const add = (a, b) => a + b; // aì™€ bë¥¼ ë”í•˜ëŠ”

  log(reduce(add, 0, [1, 2, 3, 4, 5])); // 0ì„ ì´ˆê¸°ê°’ìœ¼ë¡œ ì‹œì‘í•œë‹¤.
  // 15

  log(add(add(add(add(add(0, 1), 2), 3), 4), 5)); // 0ì„ ì´ˆê¸°ê°’ìœ¼ë¡œ í•˜ë‚˜ì”© ëˆ„ì í•´ë‚˜ê°€ë©´ì„œ ê³„ì‚°í•œë‹¤.
  // 15

  log(reduce(add, [1, 2, 3, 4, 5]));
  // 15  

  console.clear();
</script>

<script>
  // ë¦¬ë“€ìŠ¤ë¥¼í•˜ê³  ì‹œì‘í•˜ëŠ” ê°’ì„ 0ìœ¼ë¡œ ì‹œì‘í•œë‹¤.
  // ë”í•˜ëŠ” ê°’ì„ total_priceë¡œ í•œë‹¤.
  // total_priceì— product.priceë„ ë”í•´ì¤€ë‹¤.
  // ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ëª¨ë“  ìƒí’ˆì˜ ì´ ê°€ê²©ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.
  log(
    reduce(
      (total_price, product) => total_price + product.price,
      0,
      products));
</script>